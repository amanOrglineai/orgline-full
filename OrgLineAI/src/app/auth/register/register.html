<!-- container matches Login proportions -->
<div class="login-container" role="main" aria-labelledby="authTitle">
  <!-- LEFT brand/marketing column (mirrors Login) -->
  <section class="brand-section" aria-label="Brand introduction">
    <div class="logo">
      <div class="logo-main" id="authTitle">
        <img class="logo-img" src="/logo-white.png" alt="OrgLineAI" decoding="async"/>
      </div>
      <div class="logo-tagline">Intelligent Workforce Management</div>
    </div>

    <p class="brand-text">
      Streamline your workforce onboarding with secure, modern authentication.
    </p>

    <div class="features" role="list">
      <div class="feature" role="listitem">
        <div class="feature-icon" aria-hidden="true"><mat-icon>verified_user</mat-icon></div>
        <div class="feature-text">Secure Sign Up</div>
      </div>
      <div class="feature" role="listitem">
        <div class="feature-icon" aria-hidden="true"><mat-icon>bolt</mat-icon></div>
        <div class="feature-text">Fast Onboarding</div>
      </div>
      <div class="feature" role="listitem">
        <div class="feature-icon" aria-hidden="true"><mat-icon>groups</mat-icon></div>
        <div class="feature-text">Team Ready</div>
      </div>
    </div>
  </section>

  <!-- RIGHT registration column -->
  <section class="register-section" aria-label="Create account">
    <header class="register-header">
      <h1 class="register-title">Create your account</h1>
      <p class="register-subtitle">It takes less than a minute.</p>
    </header>

    <!-- Server error summary (if any) -->
    <div *ngIf="serverError()" class="server-error" role="alert">
      {{ serverError() }}
    </div>

    <!-- PASSWORD SIGN-UP FORM -->
    <form
      class="register-form"
      [formGroup]="form"
      (ngSubmit)="submit()"
      novalidate
      aria-describedby="formErrors"
    >
      <!-- Full name -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Full Name</mat-label>
        <input matInput formControlName="fullName" autocomplete="name" required />
        <mat-error *ngIf="fullName.touched && fullName.hasError('required')">
          Full name is required
        </mat-error>
        <mat-error *ngIf="fullName.touched && fullName.hasError('minlength')">
          Please enter at least 2 characters
        </mat-error>
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Email</mat-label>
        <input matInput type="email" formControlName="email" autocomplete="email" required />
        <mat-error *ngIf="email.touched && email.hasError('required')">Email is required</mat-error>
        <mat-error *ngIf="email.touched && email.hasError('email')">Enter a valid email</mat-error>
      </mat-form-field>

      <!-- Mobile group: India only (+91), exactly 10 digits -->
      <div class="row">
        <mat-form-field appearance="outline" class="cc">
          <mat-label>Country</mat-label>
          <mat-select formControlName="mobileCountry" [disabled]="true" required>
            <mat-option value="+91" selected>ðŸ‡®ðŸ‡³ +91</mat-option>
          </mat-select>
          <mat-error *ngIf="mobileCountry.touched && mobileCountry.hasError('required')">
            Select code
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="phone">
          <mat-label>Mobile Number</mat-label>
          <input
            matInput
            type="tel"
            inputmode="numeric"
            formControlName="mobileNumber"
            autocomplete="tel-national"
            required
            pattern="^[0-9]{10}$"
            maxlength="10"
          />
          <mat-hint>10 digits (India only)</mat-hint>
          <mat-error *ngIf="mobileNumber.touched && mobileNumber.hasError('required')">
            Mobile is required
          </mat-error>
          <mat-error *ngIf="mobileNumber.touched && mobileNumber.hasError('pattern')">
            Enter exactly 10 digits
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Password -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Password</mat-label>
        <input
          matInput
          [type]="showPass() ? 'text' : 'password'"
          formControlName="password"
          autocomplete="new-password"
          required
          aria-describedby="pwdStrength"
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          aria-label="Toggle password visibility"
          (click)="showPass.set(!showPass())"
        >
          <mat-icon>{{ showPass() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-hint id="pwdStrength">
          <span class="strength-bar">
            <span class="fill" [style.width.%]="strength().pct"></span>
          </span>
          <span class="strength-label">{{ strength().label }}</span>
        </mat-hint>
        <mat-error *ngIf="password.touched && password.hasError('required')">
          Password is required
        </mat-error>
        <mat-error *ngIf="password.touched && password.hasError('complexity')">
          Min 8 chars including upper, lower, number & special
        </mat-error>
      </mat-form-field>

      <!-- Confirm Password -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Confirm Password</mat-label>
        <input
          matInput
          [type]="showConfirm() ? 'text' : 'password'"
          formControlName="confirmPassword"
          autocomplete="new-password"
          required
        />
        <button
          mat-icon-button
          matSuffix
          type="button"
          aria-label="Toggle confirm password visibility"
          (click)="showConfirm.set(!showConfirm())"
        >
          <mat-icon>{{ showConfirm() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="confirmPassword.touched && form.hasError('mismatch')">
          Passwords do not match
        </mat-error>
        <mat-error *ngIf="confirmPassword.touched && confirmPassword.hasError('required')">
          Confirmation is required
        </mat-error>
      </mat-form-field>

      <!-- Terms -->
      <mat-checkbox formControlName="terms" class="terms">
        I agree to the <a href="#" aria-label="Terms">Terms</a> and
        <a href="#" aria-label="Privacy Policy">Privacy Policy</a>
      </mat-checkbox>
      <div class="terms-error" *ngIf="terms.touched && terms.hasError('required')">
        You must accept the terms to continue.
      </div>

      <!-- Submit -->
      <button
        mat-raised-button
        class="btn-primary"
        type="submit"
        [disabled]="form.invalid || submitting()"
        [attr.aria-busy]="submitting()"
      >
        <mat-progress-spinner *ngIf="submitting()" diameter="18" mode="indeterminate"></mat-progress-spinner>
        <span>{{ submitting() ? 'Creatingâ€¦' : 'Create account' }}</span>
      </button>

      <mat-divider class="my-divider" aria-label="Or continue with"></mat-divider>

      <div class="social">
        <button type="button" mat-button class="social-btn" (click)="social('google')">
          <mat-icon svgIcon="auth-google" aria-hidden="true"></mat-icon>
          <span>Sign up with Google</span>
        </button>
        <button type="button" mat-button class="social-btn" (click)="social('microsoft')">
          <mat-icon svgIcon="auth-microsoft" aria-hidden="true"></mat-icon>
          <span>Sign up with Microsoft</span>
        </button>
      </div>

      <p class="foot-link">
        Already have an account?
        <a routerLink="/login" aria-label="Log in">Log in</a>
      </p>
    </form>
  </section>
</div>
